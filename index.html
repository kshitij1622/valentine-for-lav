<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A Special Surprise ‚ù§Ô∏è</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <style>
        :root { --primary: #ff4d6d; --secondary: #ffb3c1; --bg: #fff0f3; }
        body { font-family: 'Poppins', sans-serif; background-color: var(--bg); margin: 0; overflow: hidden; display: flex; justify-content: center; align-items: center; height: 100vh; }
        
        .heart { position: absolute; color: var(--primary); opacity: 0.5; animation: float 6s linear infinite; z-index: -1; }
        @keyframes float { 0% { transform: translateY(100vh) rotate(0deg); opacity: 1; } 100% { transform: translateY(-10vh) rotate(360deg); opacity: 0; } }

        .card { background: white; padding: 2.5rem; border-radius: 30px; box-shadow: 0 15px 35px rgba(255, 77, 109, 0.2); width: 90%; max-width: 450px; text-align: center; z-index: 10; border: 2px solid var(--secondary); position: relative; }
        h1 { font-family: 'Dancing Script', cursive; color: var(--primary); font-size: 2.5rem; margin-top: 0; }
        
        #sentence-box { font-size: 1.4rem; min-height: 2rem; margin-bottom: 20px; color: #555; background: #fff8f9; padding: 15px; border-radius: 15px; border: 1px dashed var(--primary); }
        .word-reveal { display: inline-block; color: var(--primary); font-weight: 600; margin: 0 5px; animation: bounceIn 0.8s; }
        
        #question-text { font-size: 1.1rem; font-weight: 600; color: #333; margin-bottom: 20px; line-height: 1.5; }
        
        .options-grid { display: grid; gap: 12px; }
        .option-btn { background: white; border: 2px solid var(--secondary); padding: 12px; border-radius: 15px; cursor: pointer; transition: all 0.3s; font-size: 1rem; color: #444; font-family: 'Poppins', sans-serif; position: relative; }
        .option-btn:hover { background: var(--secondary); color: white; transform: translateY(-2px); }
        .option-btn.correct { background: #38b000; border-color: #38b000; color: white; animation: pulse 0.5s; }
        .option-btn.wrong { background: #ff4d6d; border-color: #ff4d6d; color: white; animation: shakeX 0.5s; }

        /* Final Buttons */
        .final-btns { display: flex; gap: 20px; justify-content: center; margin-top: 20px; }
        #no-btn { position: relative; transition: all 0.2s ease; z-index: 999; }
        #yes-btn { background-color: #38b000; color: white; border: none; padding: 15px 30px; border-radius: 15px; font-size: 1.2rem; cursor: pointer; }
    </style>
</head>
<body>

<div class="card animate__animated animate__fadeInUp" id="main-card">
    <h1 id="header">Unlock My Heart</h1>
    <div id="sentence-box">
        <span id="sentence-content">Questions remaining: 5</span>
    </div>
    <p id="question-text">Loading...</p>
    <div id="options-container" class="options-grid"></div>
</div>

<script>
    const gameData = [
        { q: "Where did i meet you? (Trick Question)", options: ["Your house", "My House", "School", "New York"], a: "School", word: "Will" },
        { q: "What is my favorite nickname for you?", options: ["pari", "Lavanya", "Paru Betu", "Nonu"], a: "Paru Betu", word: "you" },
        { q: "What month did we meet?", options: ["January", "June", "July", "August"], a: "July", word: "be" },
        { q: "What are you doing on friday?", options: ["Merko Pyaar", "Merko aur zyada Pyaar", "No pyaar for me", "Saara pyaar sirf merko milega"], a: "Saara pyaar sirf merko milega", word: "my" },
        { q: "Who loves you the most in the world?", options: ["Me", "Your Dog", "Your Mom", "Me (Pick this one)"], a: "Me (Pick this one)", word: "valentine?" }
    ];

    let currentStep = 0;
    let revealedWords = [];

    function initGame() {
        createHearts();
        loadQuestion();
    }

    function createHearts() {
        for(let i=0; i<15; i++) {
            let heart = document.createElement('div');
            heart.className = 'heart';
            heart.innerHTML = '‚ù§Ô∏è';
            heart.style.left = Math.random() * 100 + 'vw';
            heart.style.animationDuration = (Math.random() * 3 + 3) + 's';
            heart.style.fontSize = (Math.random() * 20 + 10) + 'px';
            document.body.appendChild(heart);
        }
    }

    function loadQuestion() {
        if (currentStep < gameData.length) {
            const data = gameData[currentStep];
            document.getElementById('question-text').innerText = data.q;
            const container = document.getElementById('options-container');
            container.innerHTML = '';
            
            data.options.forEach(opt => {
                const btn = document.createElement('button');
                btn.className = 'option-btn animate__animated animate__fadeIn';
                btn.innerText = opt;
                btn.onclick = () => checkAnswer(opt, btn);
                container.appendChild(btn);
            });
        } else {
            showDetectionScreen();
        }
    }

    function checkAnswer(selected, btn) {
        if (selected === gameData[currentStep].a) {
            btn.classList.add('correct');
            revealedWords.push(gameData[currentStep].word);
            updateSentence();
            currentStep++;
            setTimeout(loadQuestion, 1000);
        } else {
            btn.classList.add('wrong');
            setTimeout(() => btn.classList.remove('wrong'), 500);
        }
    }

    function updateSentence() {
        const content = document.getElementById('sentence-content');
        content.innerHTML = revealedWords.map(w => `<span class="word-reveal">${w}</span>`).join(" ");
    }

    // --- PHASE 1 FINAL: Detection ---
    function showDetectionScreen() {
        const card = document.getElementById('main-card');
        card.classList.add('animate__animated', 'animate__bounceOut');
        
        setTimeout(() => {
            card.classList.remove('animate__bounceOut');
            card.classList.add('animate__bounceIn');
            document.getElementById('sentence-box').style.display = 'none';
            document.getElementById('header').innerText = "System Alert ‚ö†Ô∏è";
            document.getElementById('question-text').innerHTML = "Scanning... <br><b>Detection Complete:</b> <br>You are officially the love of Kshitij's life!";
            document.getElementById('options-container').innerHTML = `<button class="option-btn" onclick="showFinalProposal()">Proceed</button>`;
        }, 800);
    }

    // --- PHASE 2 FINAL: The Proposal & Dodging Button ---
    function showFinalProposal() {
        const card = document.getElementById('main-card');
        card.classList.add('animate__animated', 'animate__pulse');
        
        document.getElementById('header').innerText = "One Last Thing...";
        document.getElementById('question-text').innerHTML = "Will you be my Valentine? ‚ù§Ô∏è";
        
        document.getElementById('options-container').innerHTML = `
            <div class="final-btns">
                <button id="yes-btn" onclick="celebrate()">YES!</button>
                <button id="no-btn" class="option-btn">No</button>
            </div>
        `;

        const noBtn = document.getElementById('no-btn');
        
        // The Magic: Dodge logic
        const moveBtn = () => {
            const x = Math.random() * (window.innerWidth - noBtn.offsetWidth) - (window.innerWidth / 2 - noBtn.offsetWidth);
            const y = Math.random() * (window.innerHeight - noBtn.offsetHeight) - (window.innerHeight / 2 - noBtn.offsetHeight);
            noBtn.style.transform = `translate(${x}px, ${y}px)`;
        };

        noBtn.addEventListener('mouseover', moveBtn);
        noBtn.addEventListener('touchstart', (e) => { e.preventDefault(); moveBtn(); });
    }

    function celebrate() {
        document.getElementById('main-card').innerHTML = `
            <h1 class="animate__animated animate__heartBeat animate__infinite">YAYYYYY! ‚ù§Ô∏è</h1>
            <p>I knew you couldn't say no! <br> I love you so much!</p>
            <div style="font-size: 4rem;">üíçüåπ</div>
        `;
        // Add extra hearts
        setInterval(createHearts, 100);
    }

    initGame();
</script>
</body>
</html>
